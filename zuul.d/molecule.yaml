- project-template:
    name: tripleo-operator-molecule-jobs
    check:
      jobs:
      - tripleo-operator-molecule-test_molecule_prep
      - tripleo-operator-molecule-tripleo_container_image_delete
      - tripleo-operator-molecule-tripleo_container_image_list
      - tripleo-operator-molecule-tripleo_container_image_prepare
      - tripleo-operator-molecule-tripleo_container_image_push
      - tripleo-operator-molecule-tripleo_container_image_show
      - tripleo-operator-molecule-tripleo_overcloud_deploy
      - tripleo-operator-molecule-tripleo_overcloud_export
      - tripleo-operator-molecule-tripleo_overcloud_failures
      - tripleo-operator-molecule-tripleo_overcloud_node_introspect
      - tripleo-operator-molecule-tripleo_overcloud_node_configure
      - tripleo-operator-molecule-tripleo_overcloud_node_clean

    gate:
      jobs:
      - tripleo-operator-molecule-test_molecule_prep
      - tripleo-operator-molecule-tripleo_container_image_delete
      - tripleo-operator-molecule-tripleo_container_image_list
      - tripleo-operator-molecule-tripleo_container_image_prepare
      - tripleo-operator-molecule-tripleo_container_image_push
      - tripleo-operator-molecule-tripleo_container_image_show
      - tripleo-operator-molecule-tripleo_overcloud_deploy
      - tripleo-operator-molecule-tripleo_overcloud_export
      - tripleo-operator-molecule-tripleo_overcloud_failures
      - tripleo-operator-molecule-tripleo_overcloud_node_introspect
      - tripleo-operator-molecule-tripleo_overcloud_node_configure
      - tripleo-operator-molecule-tripleo_overcloud_node_clean
      - tripleo-operator-molecule-tripleo_container_image_prepare

- job:
    files:
      - ^roles/test_molecule_prep/.*
      - ^plugins/.*
    name: tripleo-operator-molecule-test_molecule_prep
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: test_molecule_prep

- job:
    name: tripleo-operator-molecule-base
    abstract: true
    parent: openstack-tox-molecule
    success-url: "reports.html"
    failure-url: "reports.html"

- job:
    files:
      - ^roles/tripleo_container_image_delete/.*
    name: tripleo-operator-molecule-tripleo_container_image_delete
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_container_image_delete

- job:
    files:
      - ^roles/tripleo_container_image_list/.*
    name: tripleo-operator-molecule-tripleo_container_image_list
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_container_image_list

- job:
    files:
      - ^roles/tripleo_container_image_push/.*
    name: tripleo-operator-molecule-tripleo_container_image_push
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_container_image_push

- job:
    files:
      - ^roles/tripleo_container_image_show/.*
    name: tripleo-operator-molecule-tripleo_container_image_show
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_container_image_show

- job:
    files:
      - ^roles/tripleo_overcloud_deploy/.*
    name: tripleo-operator-molecule-tripleo_overcloud_deploy
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_overcloud_deploy

- job:
    files:
      - ^roles/tripleo_overcloud_export/.*
    name: tripleo-operator-molecule-tripleo_overcloud_export
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_overcloud_export

- job:
    files:
      - ^roles/tripleo_overcloud_failures/.*
    name: tripleo-operator-molecule-tripleo_overcloud_failures
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_overcloud_failures

- job:
    files:
      - ^roles/tripleo_overcloud_node_introspect/.*
    name: tripleo-operator-molecule-tripleo_overcloud_node_introspect
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_overcloud_node_introspect

- job:
    files:
      - ^roles/tripleo_overcloud_node_configure/.*
    name: tripleo-operator-molecule-tripleo_overcloud_node_configure
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_overcloud_node_configure

- job:
    files:
      - ^roles/tripleo_overcloud_node_clean/.*
    name: tripleo-operator-molecule-tripleo_overcloud_node_clean
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_overcloud_node_clean

- job:
    files:
      - ^roles/tripleo_container_image_prepare/.*
    name: tripleo-operator-molecule-tripleo_container_image_prepare
    parent: tripleo-operator-molecule-base
    vars:
      tox_extra_args: tripleo_container_image_prepare
